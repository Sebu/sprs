\chapter{Method}


\section{Signal Representation}

\section{Sparse coding stage}
\subsection{batch-OMP}
A modified version of the OMP\footnote{\nameref{sec:omp}} that can effectively sparse codes multiple signals in parallel.

\subsection{LARS-Lasso}

\section{Training Stage}
\subsection{Mairal2010}

\subsection{adaptive}

\subsection{quality messure}

\section{Encoding}
see JPEG: quantization, RLE or entropy


\section{Implementation}
\lstset{language=C++,caption=Test Code}
\begin{lstlisting}
void TrainerMairal::update(MatrixXf& A, MatrixXf& B, Dictionary& D) {
    for(int i=0; i < 1; i++) {
        for(int j=0; j < D.getElementCount(); j++) { 
            MatrixXf a = A.col(j);
            MatrixXf b = B.col(j);
            MatrixXf d = D.getData().col(j);
            if(A.coeff(j,j)==0.0) continue;
            MatrixXf u = ( (1.0/A.coeff(j,j)) * (b-(D.getData()*a)) ) + d;
            D.getData().col(j) = (1.0/fmax(u.norm(),1.0)) * u;
        }
    }
}
\end{lstlisting}
Coder
Trainer
Samples
OpenMP
etc.


